<br>
<br>
<br>
<br>

<!--
  This component displays all the coupons that were purchased by the logged-in customer, 
  allows the customer to remove coupons from its cart and allow the customer to go to 
  the "all coupons" page in order to purchase more coupons.
-->

<h3 id="centerh">
  <span class="label label-success"> &nbsp; My Purchased Coupons &nbsp;
  </span> 
</h3>

<!-- Coupons table filter buttons  -->
  <div class="form-group" id="centerh">
    <br>
    <h3> Please choose which coupons to show on table: </h3>
  </div>
  <br>
  <div id="centerh">
    <button class="btn btn-info" (click)="getAllPurchasedCoupons()"> Show All My Purchased Coupons </button> &nbsp;
    <button class="btn btn-info" (click)="showTopPriceInputForm()"> By Top Price </button> &nbsp;
    <button class="btn btn-info" (click)="showTypeInputForm()"> By Type </button>
  </div>
  <br>
  <br>
  <br>

<!-- Purchased coupons by *top price* input form filter -->
  <div *ngIf="showTopPriceInputFormBool" id="getby" class="form-group">
    <label>
      <b> Please select coupons top price: </b>
    </label>
    <input type="number" [(ngModel)]="topPriceFilter" class="form-control" id="centerh">
    <br>
    <br>
    <button class="btn btn-primary" (click)="getAllPurchasedCouponsByTopPrice()"> Show Coupons Table! </button>
  </div>

<!-- Purchased coupons by *type* input form filter -->
  <div *ngIf="showTypeInputFormBool" id="getby" class="form-group">
    <label> Please select coupons type: </label>
    <select [(ngModel)]="typeFilter" class="form-control">
      <option value="" disabled="disabled" selected="selected"> Please select Type </option>
      <option value="FOOD"> Food </option>
      <option value="ELECTRICITY"> Electricity</option>
      <option value="HOBBY"> Hobby </option>
      <option value="VACATION"> Vacation </option>
    </select>
    <br>
    <br>
    <button class="btn btn-primary" (click)="getAllPurchasedCouponsByType()"> Show Coupons Table! </button>
  </div>

<!-- Get table of customer's purchased coupons -->
  <table *ngIf="showCouponsTable" border="1" class="table table-striped table-bordered">
    <tr>
      <th> ID </th>
      <th> Title </th>
      <th> Start Date </th>
      <th> End Date </th>
      <th> Amount </th>
      <th> Type </th>
      <th> Details </th>
      <th> Price (NIS) </th>
      <th> Image </th>
      <th> Delete </th>
    </tr>

<!-- Get purchased coupons data into table -->
  <tr *ngFor="let c of purchasedCouponsList; let i = index">
    <td> {{c.id}} </td>
    <td> {{c.title}} </td>
    <td> {{c.startDate}} </td>
    <td> {{c.endDate}} </td>
    <td> {{c.amount}} </td>
    <td> {{c.couponType}} </td>
    <td> {{c.message}} </td>
    <td> {{c.price}} </td>
    <td>
      <img [src]=c.image class="img-rounded" width="80" height="50">
    </td>
    <td>
      <button class="btn btn-danger glyphicon glyphicon-trash" (click)="removePurchasedCoupon(i)"> </button>
    </td>
  </tr>
</table>

<!-- Go to all coupons page -->
  <br>
  <br>
  <div id="centerh">
    <button class="btn-lg btn btn-warning" routerLink="/allcoupons">
      Purchase more coupons!
      <span class="warning glyphicon glyphicon-shopping-cart"></span>
    </button>
  </div>
