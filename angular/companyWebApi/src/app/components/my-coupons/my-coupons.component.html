<br>
<br>
<br>
<h3 id="centerh">
    <span class="label label-success"> My Coupons Table </span>
</h3>
<br>


<!-- Coupons table filter buttons  -->
<div class="form-group" id="centerh">
    <label> Please choose which coupons to show on table: </label>
</div>
<div id="centerh">
    <button class="btn btn-success" (click)="getAllCoupons()"> Show All Coupons </button> &nbsp;
    <button class="btn btn-success" (click)="showEndDateInputForm()"> By End Date </button> &nbsp;
    <button class="btn btn-success" (click)="showTopPriceInputForm()"> By Top Price </button> &nbsp;
    <button class="btn btn-success" (click)="showTypeInputForm()"> By Type </button>
</div>
<br>

<!-- Coupons by *end date* input form filter -->
<div *ngIf="showEndDateInputFormBool" id="getby" class="form-group">
    <label>
        <b> Please select coupons end date: </b>
    </label>
    <input type="date" [(ngModel)]="endDateFilter" class="form-control">
    <br>
    <br>
    <button class="btn btn-primary" (click)="getMyCouponsByEndDate()"> Show Coupons Table! </button>
</div>

<!-- Coupons by *top price* input form filter -->
<div *ngIf="showTopPriceInputFormBool" id="getby" class="form-group">
    <label>
        <b> Please select coupons top price: </b>
    </label>
    <input type="number" [(ngModel)]="topPriceFilter" class="form-control" id="centerh">
    <br>
    <br>
    <button class="btn btn-primary" (click)="getMyCouponsByTopPrice()"> Show Coupons Table! </button>
</div>

<!-- Coupons by *type* input form filter -->
<div *ngIf="showTypeInputFormBool" id="getby" class="form-group">
    <label> Please select coupons type: </label>
    <select [(ngModel)]="typeFilter" class="form-control">
        <option value="" disabled="disabled" selected="selected"> Please select Type </option>
        <option value="FOOD"> Food </option>
        <option value="ELECTRICITY"> Electricity</option>
        <option value="HOBBY"> Hobby </option>
        <option value="VACATION"> Vacation </option>
    </select>
    <br>
    <br>
    <button class="btn btn-primary" (click)="getMyCouponsByType()"> Show Coupons Table! </button>
</div>

<br>

<!-- Get table of coupons -->
<table *ngIf="showCouponsTable" border="1" class="table table-striped table-bordered">
    <tr>
        <th> ID </th>
        <th> Title </th>
        <th> Start Date </th>
        <th> End Date </th>
        <th> Amount </th>
        <th> Type </th>
        <th> Details </th>
        <th> Price (NIS) </th>
        <th> Image </th>
        <th> Delete </th>
        <th> Edit </th>

    </tr>
    <!-- Get coupons data into table -->
    <tr *ngFor="let c of couponsList; let i = index">

        <td> {{c.id}} </td>
        <td> {{c.title}} </td>
        <td> {{c.startDate}} </td>
        <td> {{c.endDate}} </td>
        <td> {{c.amount}} </td>
        <td> {{c.couponType}} </td>
        <td> {{c.message}} </td>
        <td> {{c.price}} </td>
        <td>
            <img [src]=c.image class="img-rounded" width="80" height="50">
        </td>
        <td>
            <button class="btn btn-danger glyphicon glyphicon-trash" (click)="removeCoupon(i)">
            </button>
        </td>
        <td>
            <button class="btn btn-warning glyphicon glyphicon-pencil" (click)="showUpdateCoupon(i)">
            </button>
        </td>

    </tr>
</table>

<br>
<br>
<br>

<div class="container" id="container">
    <div class="row">
        <div class="col-md-3" id="create">
            <!-- Create coupon -->
            <br>
            <br>
            <h2>
                <span class="label label-default"> &nbsp; Create New Coupon &nbsp;
                    <span id="centerv" class="fas fa-folder-plus"></span> &nbsp;
                </span>
            </h2>
            <br>
            <br>
            <br>
            <div id="centerh">
                <span>
                    <b> Please insert new coupon details: </b>
                </span>
                <br>
                <br>
                <br>

                <div id="left" class="form-group">
                    <label> Title: </label>
                    <input type="text" [(ngModel)]="newCoupon.title" class="form-control" placeholder="Please enter coupon details">
                </div>

                <div class="form-group" id="left">
                    <label> Start Date: </label>
                    <input id="centerh" type="date" [(ngModel)]="newCoupon.startDate" class="form-control">
                </div>

                <div class="form-group" id="left">
                    <label> End Date: </label>
                    <input type="date" id="centerh" [(ngModel)]="newCoupon.endDate" class="form-control">
                </div>

                <div class="form-group" id="left">
                    <label> Amount: </label>
                    <input type="number" id="centerh" [(ngModel)]="newCoupon.amount" class="form-control">
                </div>

                <div class="form-group" id="left">
                    <label> Type: </label>
                    <select [(ngModel)]="newCoupon.couponType" class="form-control">
                        <option value="" disabled="disabled" selected="selected"> Please select Type </option>
                        <option value="FOOD"> Food </option>
                        <option value="ELECTRICITY"> Electricity</option>
                        <option value="HOBBY"> Hobby </option>
                        <option value="VACATION"> Vacation </option>
                    </select>
                </div>

                <div class="form-group" id="left">
                    <label> Details: </label>
                    <input type="text" [(ngModel)]="newCoupon.message" class="form-control" id="detailstxt" placeholder="Please enter coupon details">
                </div>

                <div class="form-group" id="left">
                    <label> Price: </label>
                    <input type="number" id="centerh" [(ngModel)]="newCoupon.price" class="form-control">
                </div>

                <div class="form-group" id="left">
                    <label> Image URL: </label>
                    <input type="text" [(ngModel)]="newCoupon.image" class="form-control" placeholder="Please enter image URL">
                </div>
                <br>

                <div id="centerh">
                    <button class="btn btn-primary" (click)="createCoupon()">
                        <b> Creat New Coupon! </b>
                    </button>
                </div>
                <br>
                <br>
                <br>
            </div>
        </div>

        <!-- Gap between columns -->
        <div class="col-md-1">
        </div>

        <!-- form: Get single coupon -->
        <div class="col-md-3" id="get">
            <br>
            <br>
            <h2>
                <span class="label label-default">&nbsp; Get Coupon &nbsp;
                    <span id="centerv" class="far fa-folder-open"></span> &nbsp;
                </span>
            </h2>
            <br>
            <br>

            <div *ngIf="showGetButtons" class="btn-group btn-group-toggle" data-toggle="buttons" id="centerh">
                <h4>
                    <b> Please select one of the options:</b>
                </h4>
                <br>
                <br>
                <label class="btn btn-group active">
                    <div id="centerh">
                        <div (click)="showGetInputById()">
                            <input type="radio">
                            <h4>
                                <b> Get Coupon By ID </b>
                            </h4>
                        </div>
                    </div>
                </label>
                <br>
                <br>
                <br>

                <label class="btn btn-group active">
                    <div (click)="showGetInputByTitle()">
                        <input type="radio">
                        <h4>
                            <b> Get Coupon By Title </b>
                        </h4>
                    </div>
                </label>
                <br>
                <br>
                <br>
            </div>

            <div *ngIf="showGetInputByIdBool">
                <span>
                    <b> Please insert coupon id: </b>
                </span>
                <br>
                <br>
                <input type="number" id="getinput" class="form-control" [(ngModel)]="couponToGet.id" size="25px" name="idtxt" placeholder="Enter coupon id">
                <br>
                <br>
                <br>
                <button class="btn btn-primary" id="centerh" (click)="getCouponById()">
                    <b> Get Coupon! </b>
                </button>
                <br>
                <br>
            </div>

            <div *ngIf="showGetInputByTitleBool">
                <span>
                    <b> Please insert coupon title: </b>
                </span>
                <br>
                <br>
                <input type="text" size="20" id="getinput" class="form-control" [(ngModel)]="couponToGet.title" name="titletxt" placeholder="Enter coupon title">
                <br>
                <br>
                <br>
                <button class="btn btn-primary" (click)="getCouponByTitle()">
                    <b> Get Coupon! </b>
                </button>
                <br>
                <br>
            </div>
            <br>


            <!-- Small table of selected coupon -->
            <div id="smtable">
                <br>
                <table *ngIf="_companySpa.showSmallTable" border="1" id="smtableb" class="table table-striped table-bordered">
                    <tr>
                        <th>
                            <small> ID </small>
                        </th>
                        <th>
                            <small> Title </small>
                        </th>
                        <th>
                            <small> Start Date </small>
                        </th>
                        <th>
                            <small> End Date </small>
                        </th>
                        <th>
                            <small> Amount </small>
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <small> {{couponToGet.id}} </small>
                        </td>
                        <td>
                            <small> {{couponToGet.title}} </small>
                        </td>
                        <td>
                            <small> {{couponToGet.startDate}} </small>
                        </td>
                        <td>
                            <small> {{couponToGet.endDate}} </small>
                        </td>
                        <td>
                            <small> {{couponToGet.amount}} </small>
                        </td>
                    </tr>
                    <br>
                    <tr>
                        <th>
                            <small> Type </small>
                        </th>
                        <th>
                            <small> Details </small>
                        </th>
                        <th>
                            <small> Price </small>
                        </th>
                        <th>
                            <small> Image </small>
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <small> {{couponToGet.couponType}} </small>
                        </td>
                        <td>
                            <small> {{couponToGet.message}} </small>
                        </td>
                        <td>
                            <small> {{couponToGet.price}} </small>
                        </td>
                        <td>
                            <img [src]=couponToGet.image class="img-rounded" width="80" height="50">
                        </td>
                    </tr>
                </table>
            </div>
            <br>
            <br>
            <!-- Back button -->
            <div *ngIf="showGetDetails" id="back">
                <br>
                <br>
                <button class="btn" (click)="backToGetButtons()">
                    <b> Back &nbsp;
                        <span class="glyphicon glyphicon-arrow-left"></span>
                    </b>
                </button>
                <br>
            </div>
            <br>
            <br>
            <br>
        </div>

        <!-- Gap between columns -->
        <div class="col-md-1">
        </div>

        <!--  form: Update coupon (Company can update only its coupon's price & end date)  -->
        <div class="col-md-3" *ngIf="showUpdateBool" id="update">
            <br>
            <br>
            <h2>
                <span class="label label-default"> &nbsp; Update Coupon &nbsp;
                    <span style="vertical-align: middle" class="far fa-edit"></span> &nbsp;
                </span>
            </h2>
            <br>
            <br>
            <br>

            <h4>
                <span class="label label-warning"> Update details of the coupon "{{updatedCoupon.title}}": </span>
            </h4>
            <br>
            <div id="left" class="form-group">
                <label> End Date: </label>
                <input id="centerh" type="date" [(ngModel)]="updatedCoupon.endDate" class="form-control">
            </div>

            <div id="left" class="form-group">
                <label> Price: </label>
                <input id="centerh" type="number" [(ngModel)]="updatedCoupon.price" class="form-control">
            </div>
            <br>
            <br>
            <br>

            <button class="btn btn-primary" (click)="updateCoupon()">
                <b> Update Coupon! </b>
            </button>

            <br>
            <br>
            <br>
            <br>
            <br>
        </div>
    </div>
</div>

<div id="footer" class="panel panel-info">
    <div class="panel-heading">
        <span id="contact">
            <strong>Contact us:&nbsp; </strong>
        </span>
        <a class="btn fab fa-facebook fa-2x" href="https://www.facebook.com/tamarcovich"></a>
        <a class="btn fab fa-linkedin fa-2x" href="https://www.linkedin.com/in/alon-samet/"></a>
        <a class="btn fas fa-envelope fa-2x" href="https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=alonkale@gmail.com&shva=1"></a>
    </div>
    <div class="panel-body">
        Powered by
        <strong>
            <i> Alon Samet </i>
            <br>
        </strong>
        <h6> Â© All Rights Reserved </h6>
    </div>
    <br>
</div>